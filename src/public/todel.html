<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galileo Design</title>
  <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
  <link rel="stylesheet" href="styles/common.css">
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Noto+Sans:wght@400;500;700;900&family=Plus+Jakarta+Sans:wght@400;500;700;800" />
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="./scripts/utils.js"></script>
  <script src="./scripts/common.js" defer></script>
  <script src="./scripts/api.js"></script>
</head>
<body>

    <aside class="sidebar"></aside>
    <main class="main-content">
        <header class="mainHeader" data-title="Recyce E-Waste" data-breadcrumb="Pages / Recycle E-Waste"></header>

        <nav class="tabs">
            <a href="activityFeed.html">Activity Feed</a>
            <a href="leaderboard.html">LeaderBoard</a>
            <a href="recycle.html">Recycle Your E-waste</a>
            <a href="#" onclick="checkAndRedirect(event)">Eco Strava</a>
        </nav>
        <div class="layout-content-container">
          <div class="header-section">
            <div class="header-text">
              <p class="main-heading">Recycle your personal IT devices</p>
              <p class="sub-heading">
                We make it easy to recycle your personal IT devices, regardless of brand or condition. Get started by telling us about the devices you'd like to recycle.
              </p>
            </div>
          </div>
          <div class="form-section">
            <label class="form-group">
              <p class="form-label">Device type</p>
              <input type="text" placeholder="E.g. smartphone, tablet, smartwatch" class="form-input">
            </label>
            <label class="form-group">
              <p class="form-label">Brand</p>
              <input type="text" placeholder="E.g. Apple, Samsung, LG" class="form-input">
            </label>
            <label class="form-group">
              <p class="form-label">Model</p>
              <input type="text" placeholder="E.g. iPhone 13, Galaxy S21, V60 ThinQ" class="form-input">
            </label>
            <label class="form-group">
              <p class="form-label">IMEI/MEID or serial number</p>
              <input type="text" placeholder="Enter IMEI/MEID or serial number" class="form-input">
            </label>
            <label class="form-group">
                <p class="form-label">Upload Device Image</p>
                <div class="upload-container">
                  <input type="file" id="fileInput" style="display: none;" />
                  <input type="text" placeholder="No file chosen" class="form-input upload-input" id="fileName" readonly />
                  <div class="upload-button" id="uploadButton">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,136v64a16,16,0,0,1-16,16H32a16,16,0,0,1-16-16V136a16,16,0,0,1,16-16H80a8,8,0,0,1,0,16H32v64H224V136H176a8,8,0,0,1,0-16h48A16,16,0,0,1,240,136ZM85.66,77.66,120,43.31V128a8,8,0,0,0,16,0V43.31l34.34,34.35a8,8,0,0,0,11.32-11.32l-48-48a8,8,0,0,0-11.32,0l-48,48A8,8,0,0,0,85.66,77.66ZM200,168a12,12,0,1,0-12,12A12,12,0,0,0,200,168Z"></path>
                    </svg>
                  </div>
                </div>
              </label>              
          </div>
          <p class="imei-description">
            What is IMEI/MEID? This is a 14â€“16 digit number that can be found in your device's settings or on the original packaging.
          </p>
          <div class="button-container">
            <button class="submit-button">
              <span class="truncate">Submit</span>
            </button>
          </div>          
          <div class="info-section">
            <div class="info-card">
              <div class="info-content">
                <p class="info-title">Did You Know?</p>
                <p class="info-text">
                  Recycling one million laptops saves the energy equivalent to the electricity used by more than 3,500 US homes in a year.
                </p>
              </div>
            </div>
          </div>
        </div>
    </main>

</body>
</html>
<style>
body {
  font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;
  background-color: #ffffff;
}



.content-wrapper {
  display: flex;
  justify-content: center;
  padding: 20px 40px;
}

.layout-content-container {
  max-width: 960px;
  width: 100%;
  border-radius: 10px;
  border: 1px solid #ccc;
  background-color: #f9f9f9;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  margin: auto; /* Centers horizontally */
}

.header-section {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: 12px;
  padding: 16px;
}

.header-text {
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 288px;
}

.main-heading {
  color: #1C160C;
  font-size: 2.25rem;
  font-weight: 900;
  line-height: 1.2;
  letter-spacing: -0.033em;
}

.sub-heading {
  color: #A18249;
  font-size: 1rem;
  font-weight: 400;
}

.form-section {
  display: flex;
  flex-direction: column;
  gap: 16px;
  max-width: 480px;
  padding: 16px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-label {
  color: #1C160C;
  font-size: 1rem;
  font-weight: 500;
}

.form-input {
  width: 100%;
  height: 3.5rem;
  padding: 15px;
  border: 1px solid #E9DFCE;
  border-radius: 12px;
  font-size: 1rem;
  color: #1C160C;
  background-color: #FFFFFF;
}

.form-input::placeholder {
  color: #A18249;
}

.upload-container {
  display: flex;
  align-items: stretch;
}

.upload-input {
  border-right: none;
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}

.upload-button {
  display: flex;
  align-items: center;
  justify-content: center;
  border-left: none;
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  padding: 0 15px;
  color: #A18249;
  border: 1px solid #E9DFCE;
  background-color: #FFFFFF;
}

.imei-description {
  color: #1C160C;
  font-size: 1rem;
  padding: 8px 16px;
}

.info-section {
  padding: 16px;
}

.info-card {
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding-top: 132px;
  background: linear-gradient(0deg, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0) 100%), 
              url("https://cdn.usegalileo.ai/sdxl10/ec6538ed-c340-4864-8243-1f1d27831156.png");
  background-size: cover;
  background-position: center;
  border-radius: 12px;
}


.info-content {
  padding: 16px;
}

.info-title {
  color: white;
  font-size: 1.5rem;
  font-weight: bold;
}

.info-text {
  color: white;
  font-size: 1rem;
  font-weight: 500;
}
.button-container {
  display: flex;
  padding: 12px 16px;
}

.submit-button {
  display: flex;
  min-width: 84px;
  max-width: 480px;
  cursor: pointer;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 9999px; /* Fully rounded */
  height: 48px; /* 12 * 4 = 48px */
  padding: 0 20px; /* Horizontal padding */
  flex-grow: 1; /* Allows button to grow */
  background-color: #019863;
  color: #ffffff;
  font-size: 1rem; /* Base font size */
  font-weight: 700; /* Bold */
  line-height: normal;
  letter-spacing: 0.015em;
  text-align: center;
}

.submit-button .truncate {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


</style>

<script>document.getElementById('uploadButton').addEventListener('click', function () {
    document.getElementById('fileInput').click();
  });
  
  document.getElementById('fileInput').addEventListener('change', function (event) {
    const fileName = event.target.files[0] ? event.target.files[0].name : 'No file chosen';
    document.getElementById('fileName').value = fileName;
  });

  document.querySelector('.submit-button').addEventListener('click', async function (event) {
    event.preventDefault(); // Prevent default form submission behavior

    // Get input values
    const deviceType = document.querySelector('input[placeholder="E.g. smartphone, tablet, smartwatch"]').value.trim();
    const brand = document.querySelector('input[placeholder="E.g. Apple, Samsung, LG"]').value.trim();
    const model = document.querySelector('input[placeholder="E.g. iPhone 13, Galaxy S21, V60 ThinQ"]').value.trim();
    const serialNumber = document.querySelector('input[placeholder="Enter IMEI/MEID or serial number"]').value.trim();
    const fileInput = document.getElementById('fileInput').files[0];

    // Validate fields
    if (!deviceType || !brand || !model || !serialNumber) {
        alert('Please fill out all fields before submitting.');
        return;
    }

    if (!fileInput) {
        alert('Please upload an image.');
        return;
    }

    // Convert the file to Base64
    const toBase64 = (file) => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = () => resolve(reader.result);
        reader.onerror = (error) => reject(error);
    });

    try {
        const base64Image = await toBase64(fileInput);

        // Prepare JSON data
        const jsonData = {
            device_type: deviceType,
            brand: brand,
            model: model,
            serial_number: serialNumber,
            image: base64Image // Include the image as a Base64 string
        };

        // Use the helper function to send the data
        const response = await post(`/recycle/personal-device/${getCompanyId()}`, jsonData);

        if (!response.ok) {
            const errorMessage = await response.json();
            throw new Error(`Failed to submit form: ${errorMessage.message}`);
        }

        // Handle successful response
        const result = await response.json();
        alert('Your device has been submitted successfully!');
        console.log('Submission response:', result);
    } catch (error) {
        console.error('Error submitting form:', error);
        alert('There was an error submitting your device. Please try again.');
    }
});

</script>